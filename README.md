# DuLunChe
Python独轮车工具。    
专门为飞天狙直播间开发的独轮车、说书体一化工具。        
主要特点：
- 全自动独轮车，不用设置文本，别人车啥我车啥
- 根据弹幕数量自动调节开车速度，不用担心车速过快过慢
- 支持发送B站表情

## 新功能   
**全自动独轮车，不用设置文本，自动调节车速！别人车啥我车啥，别人车得快我也车得快！安装好环境之后双击main.py启动。**

## 前置    
- Python 3.7+
- aiohttp, pillow, pyyaml, requests     

## 使用
本程序有两个不同的模式：
- 全自动独轮车（啥都不用设置，打开就自动开车），启动时双击`main.py`打开，配置文件在`config.yml`里面调（大部分情况下不用改）。       

- 传统独轮车（本程序v1版的设计）。启动时双击`old.py`打开文本放在text.txt里面，只会车已经有的文本，程序会自动识别文本是独轮车还是书，然后智能选择是开独轮车还是说书。           

**注意：登录信息会保存在cookies.txt内，此cookies包含了B站的登陆信息，不要将它分享给任何人！**

## 全自动独轮车原理
全自动独轮车的原理是：采集一段时间t=30s内的弹幕，若检测到当前大家发送弹幕的平均速度大于f=1（条每秒），则选择发送次数最多的n=3条弹幕，最后随机挑选其中的一条发送，发送完成后，根据当前弹幕数量休息8-18秒不等的时间，继续下一次发送，其中t,n,f等参数可以在配置文件中设置。        
另外，为了防止独轮车被片哥影响，可以调节独轮车只收集带粉丝牌的人发送的弹幕。

## 传统独轮车特性
**表情独轮车**：可以发送B站表情包，表情包应该以#开头，后面接表情ID，例如`#room_23197314_16240`，表情ID可以访问`https://api.live.bilibili.com/xlive/web-ucenter/v2/emoticon/GetEmoticons?platform=pc&room_id=<需要查的直播间号>`，返回数据里面会有表情ID的。         
**表情独轮车一些好玩的特性**：
- 发送速度不受限制（它会限制单个表情包的发送速度，但是你几个表情轮流发送就不会有问题）
- 可以在A直播间发送B直播间的表情包，只要你填写了正确的表情ID（但是要保证A直播间是有表情的直播间）    

可选参数：
- `--cookies` 设置cookies的路径，默认./cookies.txt
- `--rid` 设置房间号，默认飞狙直播间(23197314)
- `--interval` 设置独轮车间隔，默认20秒/条
- `--txt` 设置文本路径，默认./text.txt
- `--mode` 设置模式，可选auto,shuoshu,dulunche，默认auto（由程序自动判断，如果文本里面有超过40字符的句子就认为是说书，否则开独轮车）

